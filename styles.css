@font-face {
  font-family: "TaameyFrankCLM";
  src: url("/TaameyFrankCLM.woff2");
}
:root {
  --bg1: #e6f0ff;
  --bg2: #d7ecff;
  --pill: #ffffffcc;
  --ink: #1b1f27;
  --accent: #4f46e5; /* Indigo */
  --accent-2: #14b8a6; /* Teal */
  --accent-3: #f59e0b; /* Amber */
  --success: #22c55e; /* Green */
  --info: #0ea5e9; /* Sky */
  --danger: #ef4444; /* Red */
  --card: #ffffff;
  --muted: #6b7280;
}
* {
  /* Streamlined responsive stylesheet
     - Desktop (>=701px): menus are expanded by default and visible, pasuk capped at 25px
     - Mobile (<=700px): menus collapse to vertical handles and reveal with .expanded
  */

  @font-face{font-family:TaameyFrankCLM;src:url('/TaameyFrankCLM.woff2') format('woff2');font-display:swap}
  :root{
    --bg1:#e6f0ff;--bg2:#d7ecff;--pill:#ffffffcc;--ink:#1b1f27;--accent:#4f46e5;
    --accent-2:#14b8a6;--accent-3:#f59e0b;--success:#22c55e;--info:#0ea5e9;--danger:#ef4444;
    --card:#ffffff;--muted:#6b7280;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{font-family:Heebo,system-ui,-apple-system,'Segoe UI',Roboto,Arial; color:var(--ink);
    background:radial-gradient(1200px 600px at 70% -10%,var(--bg2),transparent),
              radial-gradient(1400px 800px at -10% 20%,var(--bg1),transparent),
              linear-gradient(to right,#e0eafc,#cfdef3);
  }

  /* Splash blur while loading */
  html.loading .container, html.loading .left-menu, html.loading .practice-log-float{filter:blur(6px) saturate(.9);pointer-events:none}

  /* Layout */
  .container{max-width:800px;margin:80px auto;padding:28px;border-radius:20px;background:linear-gradient(180deg,#fff,#f9fbff);box-shadow:0 16px 40px rgba(0,0,0,.08);border:1px solid #eef2ff}
  h1{text-align:center;margin-top:12px}

  /* Pasuk text: base size and desktop cap */
  .pasuk{font-family:TaameyFrankCLM,serif;font-size:20px;line-height:1.6;font-weight:500;direction:rtl;color:#0b1b30;background:linear-gradient(135deg,#fff,#f0f9ff);border:1px solid #e2e8f0;border-radius:16px;padding:18px;overflow:hidden}

  .pasuk{display:flex;flex-wrap:wrap;gap:8px;align-items:flex-start}
  .chunk{flex:0 0 auto;min-width:40px;max-width:100%;padding:8px;border-radius:12px;background:linear-gradient(180deg,#fff,#fbfeff);box-shadow:0 6px 14px rgba(8,15,25,.04)}
  .chunk-text{font-size:inherit;line-height:1.5}
  .chunk-controls{margin-top:6px}

  /* prominent current chunk displayed above the inline chunks */
  .current-large{background:linear-gradient(180deg,#fff,#f8feff);border:1px solid #e6f3ff;border-radius:14px;padding:18px;margin:12px 0;min-height:64px;display:flex;align-items:center;justify-content:center;text-align:center;direction:rtl}
  .current-large{font-family:TaameyFrankCLM,serif}
  .current-large .chunk-text{font-size:inherit;line-height:1.3;font-weight:700}

  /* Points floating (kept behind expanded menus) */
  .points{position:fixed;top:8px;left:50%;transform:translateX(-50%);z-index:900;background:linear-gradient(135deg,#fff,#f3f6ff);border-radius:999px;padding:8px 14px;box-shadow:0 8px 20px rgba(0,0,0,.08);font-size:16px}

  /* Left menu & practice log base (desktop first) */
  .left-menu{position:fixed;top:16px;left:16px;width:160px;background:linear-gradient(160deg,#fff,#f3f6ff);border-radius:16px;padding:12px;box-shadow:0 10px 25px rgba(0,0,0,.08);border:1px solid #eef2ff;z-index:11000}
  .practice-log-float{position:fixed;top:16px;right:16px;width:280px;background:linear-gradient(160deg,#fff,#f4fffe);border-radius:16px;padding:12px;box-shadow:0 10px 25px rgba(0,0,0,.08);border:1px solid #e6fffb;z-index:11000}
  .menu-title{font-weight:700;margin-bottom:8px;color:var(--accent);text-align:center}
  .menu-btn{display:block;width:100%;padding:8px 10px;margin:6px 0;border-radius:10px;border:none;background:#eef2ff;color:#334155;cursor:pointer;font-weight:600}
  .menu-btn.active{background:linear-gradient(135deg,var(--accent),#7c3aed);color:#fff;box-shadow:0 6px 16px rgba(79,70,229,.35)}

  /* close X (hidden by default, shown when expanded or on desktop) */
  .menu-close,.log-close{display:none;position:absolute;font-size:14px;color:#475569}
  .left-menu .menu-close{top:8px;right:10px}
  .practice-log-float .log-close{top:8px;left:10px}

  /* progress */
  .progress-wrap{display:flex;flex-direction:column;gap:8px;align-items:center}
  .progress-pill{background:var(--pill);backdrop-filter:saturate(1.3) blur(6px);border:1px solid #e2e8f0;border-radius:999px;padding:10px 14px;width:100%;max-width:760px;box-shadow:inset 0 8px 20px rgba(0,0,0,.06)}
  .progress-cubes{display:flex;gap:6px;width:100%;align-items:center}
  .progress-block{flex:1 1 0;min-width:8px;height:14px;border-radius:6px;background:#e5e7eb;border:1px solid #e2e8f0;position:relative;overflow:hidden}
  .progress-block .fill{position:absolute;inset:0;width:0;height:100%;transition:width .35s ease;background:#e5e7eb;border-radius:inherit}
  /* color tiers for progress fills (script toggles pb-gray/pb-yellow/pb-green on the block) */
  .progress-block.pb-gray .fill { background: #e5e7eb }
  .progress-block.pb-yellow .fill { background: linear-gradient(135deg, var(--accent-3), #fbbf24) }
  .progress-block.pb-green .fill { background: linear-gradient(135deg, var(--success), #16a34a) }
  .progress-block.current{outline:2px solid rgba(14,165,233,.6);box-shadow:none}

  .progress-arrows{display:flex;gap:12px}
  .progress-arrows .arrow{border:none;padding:8px 12px;border-radius:8px;color:#fff;font-size:18px;min-width:44px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer}
  /* unify arrow colors so both arrows are visually consistent */
  .progress-arrows .arrow.left,.progress-arrows .arrow.right{background:linear-gradient(135deg,var(--accent),#7c3aed)}
  .progress-arrows .arrow:disabled{opacity:.35;cursor:not-allowed}

  /* Player */
  .player{display:flex;gap:10px;align-items:center;justify-content:center;margin:10px 0}
  .player-btn{width:44px;height:44px;border-radius:50%;border:none;color:#fff;font-size:16px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer}
  .player-btn.play{background:linear-gradient(135deg,#06b6d4,#3b82f6)}
  .player-btn.stop{background:linear-gradient(135deg,#ef4444,#f97316)}
  /* make pause button colorful as well (was appearing grey) */
  .player-btn.pause{background:linear-gradient(135deg,#7c3aed,#4f46e5)}
  .player-timeline{display:flex;flex-direction:column;width:60%;min-width:200px}
.progress-block{position:relative}
.progress-label{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-size:11px;color:#0b1b30;pointer-events:none;font-weight:700}
  .player-timeline input[type=range]{width:100%}
  .player-time{font-size:12px;color:var(--muted);text-align:center}

/* Per-chunk controls rendered inside the pasuk area */
.chunk-controls{display:flex;gap:10px;align-items:center;margin-top:8px}
.chunk-play{width:44px;height:44px;border-radius:50%;border:none;background:linear-gradient(135deg,var(--accent-2),#06b6d4);color:#fff;font-size:18px;display:inline-flex;align-items:center;justify-content:center}
.read-btn{width:56px;height:56px;border-radius:50%;border:none;background:linear-gradient(135deg,var(--success),#10b981);color:#fff;font-weight:700;font-size:14px;display:inline-flex;align-items:center;justify-content:center}

/* chunk sizing: previous chunks shrink so new/current chunk can be larger and fit */
.chunk{transition:transform .18s ease,font-size .18s ease,opacity .18s ease}
.chunk-prev{transform:scale(.86);opacity:.9}
.chunk-current{transform:scale(1);opacity:1}
.chunk-text{white-space:pre-wrap}

  /* Floating bottom controls (mobile layout handled below) */
  .floating-controls{position:fixed;left:50%;bottom:16px;transform:translateX(-50%);z-index:1000;background:#0f172a1a;backdrop-filter:blur(4px);padding:8px 10px;border-radius:12px}
  .floating-controls button{font-size:18px;padding:10px 18px;border-radius:10px;border:none;color:#fff}
  .floating-controls #didWell{background:linear-gradient(135deg,var(--success),#10b981)}
  .floating-controls #needPractice{background:linear-gradient(135deg,var(--info),#3b82f6)}

  /* Small-screen adjustments: collapse menus to handles and reserve space */
  @media (max-width:700px){
    html,body{height:100vh;overflow:hidden}
    .container{max-width:none;margin:56px 8px 10vh;padding:14px;height:calc(100vh - 10vh - 64px);overflow:hidden}
    h1{font-size:18px;margin:8px 0}
    #pasukTitle{font-size:16px}
  .pasuk{font-size:clamp(16px,4.2vw,24px);padding:12px;margin:10px 0}
  .chunk-text{font-size:16px}

    /* collapsed handles */
    .left-menu{top:8px;left:8px;width:44px;padding:6px;border-radius:12px}
    .practice-log-float{top:8px;right:8px;width:44px;padding:6px;border-radius:12px}
    .left-menu .menu-body{display:none}
    .left-menu.expanded{width:220px;padding:10px}
    .left-menu .menu-handle{display:block;cursor:pointer;height:100%;position:relative}
  .left-menu .menu-title{writing-mode:vertical-rl;transform:rotate(180deg);font-size:14px;padding:6px 0;color:var(--accent);font-weight:700}
    .left-menu.expanded .menu-title{display:none}
    .left-menu.expanded .menu-body{display:block}
    .left-menu.expanded .menu-close{display:block;text-shadow:-1px -1px 0 white,1px -1px 0 white,-1px 1px 0 white,1px 1px 0 white}

    .practice-log-float .log-handle{display:block;writing-mode:vertical-rl;transform:rotate(180deg);font-size:13px;color:var(--accent-2);cursor:pointer}
  .practice-log-float .log-handle{font-weight:700}
    .practice-log-float .log-body{display:none}
    .practice-log-float.expanded{width:300px;padding:10px}
    .practice-log-float.expanded .log-body{display:block}
    .practice-log-float.expanded .log-handle{display:none}
    .practice-log-float.expanded .log-close{display:block;text-shadow:-1px -1px 0 white,1px -1px 0 white,-1px 1px 0 white,1px 1px 0 white}

    .floating-controls{left:0;transform:none;bottom:0;width:100%;padding:6px;height:10vh;display:grid;grid-template-columns:repeat(3,1fr);gap:6px;justify-items:center;align-items:center}
    .floating-controls button{width:90%;height:80%;border-radius:9999px}
  }

  /* Desktop tweaks: show close X on expanded menus and keep pasuk size capped */
  @media (min-width:701px){
    .menu-close,.log-close{display:block}
    /* ensure vertical handles are hidden on desktop */
    .left-menu .menu-handle,.practice-log-float .log-handle{display:none}
    /* cap pasuk size to 25px on desktop */
  .pasuk{font-size:20px;max-height:none}
  /* allow autosize up to 30px on desktop */
  .pasuk[data-desktop-cap] { --desktop-cap: 30px }
  }

/* Aliyah label and small note */
.aliyah-label{font-size:13px;color:var(--muted);text-align:center;margin:6px 0 0 6px;font-weight:700}
.note{font-size:11px;color:var(--muted);text-align:center;margin-top:6px;margin-bottom:4px}

/* Practice log table styling (global so it's present on desktop & mobile) */
.practice-log-float table{width:100%;border-collapse:collapse;font-family:Heebo,system-ui,-apple-system,'Segoe UI',Roboto,Arial;margin:6px 0}
.practice-log-float thead th{font-weight:700;font-size:12px;color:var(--muted);padding:6px 8px;text-align:left;background:rgba(255,255,255,0.6);border-radius:6px}
.practice-log-float tbody td{padding:8px 6px;border-bottom:1px dashed rgba(0,0,0,0.04);font-size:13px}
.practice-log-float tbody tr:last-child td{border-bottom:none}

/* Ensure Heebo is available for Hebrew UI text where appropriate */
body, .menu-title, .menu-btn, .practice-log-float { font-family: Heebo, system-ui, -apple-system, 'Segoe UI', Roboto, Arial; }

