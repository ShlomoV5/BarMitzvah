<!DOCTYPE html>
<html lang="en" class="loading">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bar Mitzvah Practice</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Frank+Ruhl+Libre:wght@400;500&display=swap"
      rel="stylesheet"
    />

    <!-- Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Loading Splash -->
    <div id="splash" aria-hidden="true">
      <div class="splash-card">
        <div class="spinner" aria-label="Loading..."></div>
        <div class="splash-text">Loading content</div>
      </div>
    </div>

    <!-- Left menu -->
    <aside class="left-menu" id="leftMenu" aria-hidden="true">
      <div class="menu-handle" id="leftMenuHandle" title="Aliyot menu">
        <div class="menu-title">Aliyot Menu</div>
        <div class="menu-close" aria-hidden="true">✕</div>
      </div>
      <div class="menu-body">
        <button class="menu-btn active" data-aliyah="rishon">ראשון</button>
        <button class="menu-btn" disabled>שני</button>
        <button class="menu-btn" disabled>שלישי</button>
        <button class="menu-btn" disabled>רביעי</button>
        <button class="menu-btn" disabled>חמישי</button>
        <button class="menu-btn" disabled>שישי</button>
        <button class="menu-btn" disabled>שביעי</button>
        <button class="menu-btn" disabled>הפטרה</button>
      </div>
    </aside>

    <!-- Floating minimal practice log (right) -->
    <aside class="practice-log-float" id="practiceLogFloat" aria-hidden="true">
      <div class="log-handle" id="practiceLogHandle" title="Practice log">Log</div>
      <div class="log-close" aria-hidden="true">✕</div>
      <div class="log-body">
        <table>
          <thead>
            <tr>
              <th title="Date">📅</th>
              <th title="Points">⭐</th>
              <th title="Time">⏱️</th>
            </tr>
          </thead>
          <tbody id="practiceLogBody"></tbody>
        </table>
      </div>
    </aside>

    <div class="container">
  <!-- Aliyah label -->
  <div class="aliyah-label" id="aliyahLabel">Aliyah: ראשון</div>

  <!-- Progress pill + arrows -->
      <div class="progress-wrap">
        <div class="progress-pill">
          <div id="progressBar" class="progress-cubes"></div>
        </div>
        <div class="progress-arrows">
          <button id="progressBack" class="arrow left" aria-label="Previous">◀</button>
          <button id="progressNext" class="arrow right" aria-label="Next">▶</button>
        </div>
      </div>

  <h1 id="currentLearning">Currently learning:</h1>
  <div class="note">Always prefer reading from the BOOK when possible!</div>
  <h2 id="pasukTitle"></h2>

      <div class="pasuk" id="pasukText"></div>

      <!-- Hidden audio element; custom player UI below -->
      <audio id="pasukAudio" preload="metadata" style="display:none;">
        <source id="audioSource" src="" type="audio/mpeg" />
      </audio>

      <div class="player" id="player">
        <button id="playBtn" class="player-btn play" aria-label="Play">▶</button>
        <button id="pauseBtn" class="player-btn pause" aria-label="Pause">❚❚</button>
        <div class="player-timeline">
          <input id="playerSeek" type="range" min="0" max="100" value="0" />
          <div class="player-time"><span id="curTime">0:00</span> / <span id="durTime">0:00</span></div>
        </div>
      </div>

      <!-- Floating, anchored controls -->
      <div class="buttons floating-controls">
        <button id="didWell">I did well</button>
        <button id="needPractice">Needs Practice</button>
  <!-- start-over button removed per request -->
      </div>

      <div id="feedback" class="feedback"></div>

      <div class="points">Points for today: <span id="points">0</span></div>

  <!-- end-of-aliyah UI removed per UX simplification -->
    </div>

    <!-- Main controller uses dynamic import for aliyot -->
    <script type="module" src="script.js"></script>
  </body>
</html>
